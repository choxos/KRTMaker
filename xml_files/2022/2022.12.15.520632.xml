<!DOCTYPE article
 PUBLIC "-//NLM//DTD JATS (Z39.96) Journal Archiving and Interchange DTD v1.2 20190208//EN" "JATS-archivearticle1.dtd">
<article xmlns:ali="http://www.niso.org/schemas/ali/1.0/" xmlns:mml="http://www.w3.org/1998/Math/MathML" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" article-type="preprint"><?all-math-mml yes?><?use-mml?><?origin ukpmcpa?><front><journal-meta><journal-id journal-id-type="nlm-ta">bioRxiv</journal-id><journal-title-group><journal-title>bioRxiv : the preprint server for biology</journal-title></journal-title-group><issn pub-type="ppub"/></journal-meta><article-meta><article-id pub-id-type="manuscript">EMS158950</article-id><article-id pub-id-type="doi">10.1101/2022.12.15.520632</article-id><article-id pub-id-type="archive">PPR586969</article-id><article-categories><subj-group subj-group-type="heading"><subject>Article</subject></subj-group></article-categories><title-group><article-title>Ot2Rec: A Semi-Automatic, Extensible, Multi-Software Tomographic Reconstruction Workflow</article-title></title-group><contrib-group><contrib contrib-type="author"><contrib-id contrib-id-type="orcid">https://orcid.org/0000-0003-0349-3958</contrib-id><name><surname>Yee</surname><given-names>Neville B.-y.</given-names></name><xref ref-type="aff" rid="A1">1</xref></contrib><contrib contrib-type="author"><contrib-id contrib-id-type="orcid">https://orcid.org/0000-0001-8697-4903</contrib-id><name><surname>Ho</surname><given-names>Elaine M.L.</given-names></name><xref ref-type="aff" rid="A1">1</xref></contrib><contrib contrib-type="author"><contrib-id contrib-id-type="orcid">https://orcid.org/0000-0003-0991-8785</contrib-id><name><surname>Tun</surname><given-names>Win</given-names></name><xref ref-type="aff" rid="A2">2</xref><xref ref-type="aff" rid="A3">3</xref></contrib><contrib contrib-type="author"><contrib-id contrib-id-type="orcid">https://orcid.org/0000-0003-3234-6228</contrib-id><name><surname>Smith</surname><given-names>Jake L.R.</given-names></name><xref ref-type="aff" rid="A4">4</xref><xref ref-type="aff" rid="A5">5</xref></contrib><contrib contrib-type="author"><contrib-id contrib-id-type="orcid">https://orcid.org/0000-0002-1732-1041</contrib-id><name><surname>Dumoux</surname><given-names>Maud</given-names></name><xref ref-type="aff" rid="A4">4</xref></contrib><contrib contrib-type="author"><contrib-id contrib-id-type="orcid">https://orcid.org/0000-0003-2580-2299</contrib-id><name><surname>Grange</surname><given-names>Michael</given-names></name><xref ref-type="aff" rid="A4">4</xref><xref ref-type="aff" rid="A5">5</xref></contrib><contrib contrib-type="author"><contrib-id contrib-id-type="orcid">https://orcid.org/0000-0001-6259-1684</contrib-id><name><surname>Darrow</surname><given-names>Michele C.</given-names></name><xref ref-type="aff" rid="A1">1</xref><xref ref-type="aff" rid="A6">6</xref></contrib><contrib contrib-type="author"><contrib-id contrib-id-type="orcid">https://orcid.org/0000-0002-8438-1415</contrib-id><name><surname>Basham</surname><given-names>Mark</given-names></name><xref ref-type="aff" rid="A1">1</xref><xref ref-type="aff" rid="A3">3</xref></contrib></contrib-group><aff id="A1"><label>1</label>Artificial Intelligence &amp; Informatics, Rosalind Franklin Institute, Harwell Campus, Didcot, OX11 0FA, UK</aff><aff id="A2"><label>2</label>Faculty of Medical Sciences, Newcastle University, Newcastle upon Tyne, NE1 7RU, UK</aff><aff id="A3"><label>3</label>Diamond Light Source Ltd., Diamond House, Harwell Campus, Didcot, OX11 0DE, UK</aff><aff id="A4"><label>4</label>Structural Biology, Rosalind Franklin Institute, Harwell Campus, Didcot, OX11 0FA, UK</aff><aff id="A5"><label>5</label>Division of Structural Biology, Wellcome Centre for Human Genetics, University of Oxford, Oxford, OX3 7BN, UK</aff><aff id="A6"><label>6</label>SPT Labtech, Melbourn Science Park, Cambridge Road, Melbourn, SG8 6HB, UK</aff><pub-date pub-type="nihms-submitted"><day>23</day><month>12</month><year>2022</year></pub-date><pub-date pub-type="preprint"><day>19</day><month>12</month><year>2022</year></pub-date><permissions><ali:free_to_read/><license><ali:license_ref>https://creativecommons.org/licenses/by/4.0/</ali:license_ref><license-p>This work is licensed under a <ext-link ext-link-type="uri" xlink:href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0 International license</ext-link>.</license-p></license></permissions><abstract><p id="P1">Electron cryo-tomography (cryo-ET) is an imaging technique for probing 3D structures with at the nanometre scale. This technique has been used extensively in the biomedical field to study the complex structures of proteins and other macromolecules. With the advancement in technology, microscopes are currently capable of producing images amounting to terabytes of data per day, posing great challenges for scientists as the speed of processing of the images cannot keep up with the ever-higher throughput of the microscopes. Therefore, automation is an essential and natural pathway on which image processing – from individual micrographs to full tomograms – is developing. In this paper, we present Ot2Rec, an open-source pipelining tool which aims to enable scientists to build their own processing workflows in a flexible and automatic manner. The basic building blocks of Ot2Rec are plugins which follow a unified API structure, making it simple for scientists to contribute to Ot2Rec by adding features which are not already available. In this paper, we also present three case studies of image processing using Ot2Rec, through which we demonstrate the speedup of using a semi-automatic workflow over a manual one, the possibility of writing and using custom (prototype) plugins, and the flexibility of Ot2Rec which enables the mix-and-match of plugins. We also demonstrate, in the <xref ref-type="supplementary-material" rid="SD1">supplementary information</xref>, a built-in reporting feature in Ot2Rec which aggregates the metadata from all process being run, and output them in the Jupyter Notebook and/or HTML formats for quick review of image processing quality. Ot2Rec can be found at <ext-link ext-link-type="uri" xlink:href="https://github.com/rosalindfranklininstitute/ot2rec">https://github.com/rosalindfranklininstitute/ot2rec</ext-link>.</p></abstract><kwd-group><kwd>cryo-electron tomography</kwd><kwd>image processing</kwd><kwd>cryo-electron microscopy</kwd></kwd-group></article-meta></front><body><sec id="S1" sec-type="intro"><label>1</label><title>Introduction</title><sec id="S2"><label>1.1</label><title>Cryo-ET &amp; data acquisition</title><p id="P2">Electron cryo-tomography (cryo-ET), is an imaging technique that produces three-dimensional outputs in the nanometre resolution range<sup>(<xref ref-type="bibr" rid="R1">1</xref>,<xref ref-type="bibr" rid="R2">2</xref>)</sup>. In the biomedical field, it has been used to study heterogeneous purified proteins using sub-tomogram averaging<sup>(<xref ref-type="bibr" rid="R3">3</xref>,<xref ref-type="bibr" rid="R4">4</xref>)</sup>, structures within thin or smaller cells<sup>(5)</sup>, the edges of larger cells<sup>(<xref ref-type="bibr" rid="R6">6</xref>)</sup>, and more recently in conjunction with cryo focused ion beam milling (cryoFIB), sub-cellular structures and proteins<sup>(<xref ref-type="bibr" rid="R7">7</xref>–<xref ref-type="bibr" rid="R9">9</xref>)</sup>.</p><p id="P3">The sample must first be vitrified using either traditional plunge freezing methods <sup>(<xref ref-type="bibr" rid="R10">10</xref>)</sup> or high pressure freezing for larger samples<sup>(<xref ref-type="bibr" rid="R11">11</xref>)</sup>. In some cases, the frozen sample is subsequently thinned by cryosectioning<sup>(<xref ref-type="bibr" rid="R12">12</xref>)</sup> or cryoFIB milling <sup>(<xref ref-type="bibr" rid="R13">13</xref>–<xref ref-type="bibr" rid="R15">15</xref>)</sup>). These cryogenic specimen preparation techniques alleviate the need for chemical fixatives and stains which are commonly used to preserve biological structures and bolster contrast in room temperature volume electron microscopy (vEM) techniques<sup>(<xref ref-type="bibr" rid="R16">16</xref>,<xref ref-type="bibr" rid="R17">17</xref>)</sup>.</p><p id="P4">During data collection images are taken at a series of angles by tilting the specimen, typically in the range of approximately −60° to +60° with a 2° to 5° step between tilts, though many tilt acquisition schemes exist to ration exposure of the specimen<sup>(<xref ref-type="bibr" rid="R18">18</xref>)</sup>. In all cases, a portion of information is not collected due to mechanical constraints of the microscope stage and increasing specimen thickness during tilting. This leads to a missing wedge or cone of information in Fourier space and an elongation of the resultant reconstructed data in the direction of the electron beam in real space<sup>(<xref ref-type="bibr" rid="R19">19</xref>)</sup>.</p></sec><sec id="S3"><label>1.2</label><title>Current image processing workflow for cryo-ET</title><p id="P5">Several stages of image processing tasks are required to produce tomograms from raw micrograph movies (<xref ref-type="fig" rid="F1">Figure 1</xref>). Many software tools exist for each stage, which have been reviewed recently by Pyle and Zanetti<sup>(<xref ref-type="bibr" rid="R20">20</xref>)</sup>. Raw micrograph movies at each tilt angle are first motion-corrected to compensate for specimen movement during acquisition. Individual frames of the movies recorded at each angle are aligned and averaged to produce a single image for each tilt angle. These motion-corrected images are sorted in order of their tilt angles to produce a tilt series. Tilt series projections are then aligned to ensure the rotation axis is consistent between projections. This can be performed with or without fiducial markers. At this stage, the contrast transfer function (CTF) can be optionally estimated from the aligned tilt series, and deconvolved with the tomogram at later stages to improve the image quality. Aligned projections are then reconstructed into tomograms, which provide the 3D representation of the specimen. Post-processing strategies can then be applied to the tomograms, which will be dependent on the specific research question. This often involves sub-tomogram averaging (STA) to obtain high-resolution structures of repeating structures in the tomogram, or segmentation to determine spatial relationships between structures.</p></sec><sec id="S4"><label>1.3</label><title>Existing cryo-ET pipelines</title><p id="P6">The image processing tasks required to reconstruct tomograms from the movies are generally consistent for different experiments, though the post-processing stages afterwards often require more customisation. However, many software tools exist for each stage of the reconstruction process, each with their own disparate data structures, standards, and user interfaces. Users must learn how to use each individual tool and adapt their data structures to fit the specific software package, increasing the barrier to trying alternative tools which may have better performance or functionality. Therefore, pipelines which manage the data flow and provide a unified interface for several software tools would enable easier combination and trialling of the different software tools to optimise reconstruction outcomes.</p><p id="P7">A few pipelines already exist to automate the reconstruction process within a single framework, to varying degrees of customisation (<xref ref-type="table" rid="T1">Table 1</xref>). Generally, these pipelines were developed to automate reconstruction for datasets collected within a single research group, and thus, do not enable substitution of different tools developed elsewhere. These pipelines include TomoBear<sup>(<xref ref-type="bibr" rid="R21">21</xref>)</sup>, TomoRobot<sup>(<xref ref-type="bibr" rid="R22">22</xref>)</sup>, EMAN2<sup>(<xref ref-type="bibr" rid="R23">23</xref>)</sup>, and Warp<sup>(<xref ref-type="bibr" rid="R25">25</xref>)</sup>. Scipion 3.0 gives users a wide range of software tools to choose in their framework and offers a user-friendly workflow builder in their graphical user interface (GUI). However, accessing the Scipion tools programmatically is not straightforward, so automation of the process is more challenging.</p></sec><sec id="S5"><label>1.4</label><title>Motivation</title><p id="P8">Here, we present Ot2Rec, a pipeline for reconstruction of cryo-ET tilt series which allows users to combine different software tools within a single framework. Ot2Rec can be used via a GUI but can also be automated programatically if required. Ot2Rec is easily extensible through its plugin architecture, and published open-source under the Apache v2.0 license. Ot2Rec is developed as an open-source project with a strong focus on user involvement. We welcome contributions from users and developers alike, our contributors guide is available on our Github Wiki. A written tutorial guiding users through reproducing one of our case studies is available in the <xref ref-type="supplementary-material" rid="SD1">Supplementary Information</xref>, in addition to a guide to writing Ot2Rec plugins for developers. These documents are also online on our wiki at <ext-link ext-link-type="uri" xlink:href="https://github.com/rosalindfranklininstitute/ot2rec/wiki">https://github.com/rosalindfranklininstitute/ot2rec/wiki</ext-link>.</p></sec></sec><sec id="S6"><label>2</label><title>Development philosophy &amp; features</title><p id="P9">Ot2Rec was developed to achieve three key characteristics of a tomography reconstruction pipeline, with the ultimate aim of fully automating tomography reconstruction to obtain high quality tomograms. Firstly, the pipeline had to offer different routes to combine tools for each stage of tomogram reconstruction. The pipeline had to be user-friendly and accessible to users without programming experience. Finally, a mechanism to evaluate all tilt series at a glance was also required. These functions together provide the framework for which a completely automated tomogram reconstruction pipeline can be built, where the optimum combination of software tools and parameters can be automatically selected and applied to several tilt series at once, with minimal user intervention. The following sections describe the design choices that were made towards achieving this functionality in Ot2Rec.</p><sec id="S7"><label>2.1</label><title>Different routes to tomogram reconstruction</title><sec id="S8"><label>2.1.1</label><title>Plugin architecture</title><p id="P10">In Ot2Rec, the basic program infrastructure is designed such that each feature is a standalone plugin, which has minimal interaction with other plugins. Such design is beneficial for developers as a fault in one plugin does not directly cause other plugins to fail, making further development and maintenance easier. This plugin architecture also facilitates extension of Ot2Rec to cover other image processing tools, whilst maintaining easy integration with existing workflows.</p><p id="P11">Each plugin performs one task within the reconstruction process, e.g., motion correction or alignment. The plugin has two main subroutines, one to capture user input and configure the parameters for the task to be performed, and the other which generates the commands to run the task on all tilt series. Each plugin follows a simple yet unified structure for its application programming interface (API): a Python class which encapsulates all the essential plugin-specific methods, followed by subroutines that enable the plugin to communicate with the Ot2Rec main API. These subroutines are called and executed directly as entry-points by users. This well-defined, simple structure is helpful for developers and users alike as they become accustomed to the patterns of using Ot2Rec.</p><p id="P12">Plugins were chosen based on the software tools already used by users in our institute. The nine plugins currently available in Ot2Rec 0.2 are: <list list-type="bullet" id="L1"><list-item><p id="P13">Motion Correction <list list-type="simple" id="L2"><list-item><label>–</label><p id="P14">MotionCor2<sup>(<xref ref-type="bibr" rid="R26">26</xref>)</sup></p></list-item></list></p></list-item><list-item><p id="P15">CTF Estimation and Deconvolution</p><list list-type="simple" id="L3"><list-item><label>–</label><p id="P16">CTFFind4<sup>(<xref ref-type="bibr" rid="R27">27</xref>,<xref ref-type="bibr" rid="R28">28</xref>)</sup></p></list-item><list-item><label>–</label><p id="P17">CTFSim (based on<sup>(<xref ref-type="bibr" rid="R28">28</xref>)</sup>; described in <xref ref-type="sec" rid="S24">Section 5.2</xref>)</p></list-item><list-item><label>–</label><p id="P18">RLDeconv (described in <xref ref-type="sec" rid="S24">Section 5.2</xref>)</p></list-item></list></list-item><list-item><p id="P19">Tilt series alignment</p><list list-type="simple" id="L4"><list-item><label>–</label><p id="P20">IMOD<sup>(<xref ref-type="bibr" rid="R29">29</xref>,<xref ref-type="bibr" rid="R30">30</xref>)</sup></p></list-item><list-item><label>–</label><p id="P21">AreTomo<sup>(<xref ref-type="bibr" rid="R31">31</xref>)</sup></p></list-item></list></list-item><list-item><p id="P22">Reconstruction</p><list list-type="simple" id="L5"><list-item><label>–</label><p id="P23">IMOD<sup>(<xref ref-type="bibr" rid="R29">29</xref>,<xref ref-type="bibr" rid="R30">30</xref>)</sup></p></list-item><list-item><label>–</label><p id="P24">AreTomo<sup>(<xref ref-type="bibr" rid="R31">31</xref>)</sup></p></list-item><list-item><label>–</label><p id="P25">Savu<sup>(<xref ref-type="bibr" rid="R32">32</xref>)</sup></p></list-item></list></list-item></list>
</p></sec><sec id="S9"><label>2.1.2</label><title>Metadata handling</title><p id="P26">Metadata are small files used to record the locations and other useful information about actual data being processed. Metadata often plays a key role in a multi-step computational workflow as it defines how the data are linked to each other. Metadata generated from various software and processes are often incompatible (for instance, having different headers or different metadata file formats) creating obstructions in data flow. This is a currently known problem in the electron tomography community – there are many workflows and packages which use different and incompatible metadata formats, making interoperability between separate software packages extremely challenging.</p><p id="P27">In view of this, Ot2Rec has been designed with a central philosophy of unified metadata structure. To use Ot2Rec for image processing, the user first runs the command <monospace>o2r.new</monospace> with which Ot2Rec aggregates the master metadata that includes the path to the raw images (micrographs) and the tilt series indices of the individual micrographs.</p><p id="P28">In subsequent processing steps (i.e. plugins), Ot2Rec stores the metadata files from the individual programs and outputs an independent metadata file. This metadata file is a human-readable easily parsed YAML format that carries essential information for the next steps.</p><p id="P29">The unified internal metadata system allows workflows to be built flexibly by interchanging the different plugins for each task. Whilst several default workflows are implemented in the package (cf. <xref ref-type="fig" rid="F2">Fig.2</xref>), for instance, MotionCor2 → IMOD (alignment + reconstruction), or MotionCor2 → IMOD (alignment) → Savu (reconstruction), the “network” of possible routes can continue to grow as more plugins are implemented into Ot2Rec. This flexibility and customisation allows the user to maximise both result quality and computational performance.</p><p id="P30">As image processing programs each have different parameters, the quality of the output and computational performance can vary vastly depending on the chosen parameters. With a flexible workflow, users can choose the tools that best suit their purposes and test different parameters provided by the same tool. They can also compare the results using the reporting feature of Ot2Rec. Once the user has completed a comparative study, preferably using a small, representative subset of their data, they can continue to process the rest of their data using the optimal workflow and parameters they have identified.</p></sec></sec><sec id="S10"><label>2.2</label><title>User-friendliness</title><p id="P31">Graphical user interfaces (GUI) are a means for a program to communicate with the user. Its usage can range from the collection of essential parameters to the interactive display of results.</p><p id="P32">In Ot2Rec, a Linux-based program, since the building blocks are the individual plugins which have a wide range of parameters as inputs, a GUI is necessary to remove the use of command-line flags. For this reason, we have implemented MagicGUI<sup>(<xref ref-type="bibr" rid="R33">33</xref>)</sup> as Ot2Rec’s GUI for gathering parameters from users. One of the biggest benefits of using a simple GUI over the command-line is that parameters can be presented in a more human-readable and descriptive way rather than using internal variable names, which in many cases need to be brief. Another benefit of using a GUI as the first point of communication between the user and the program is that since the parameters are more descriptively presented, the chance of incorrect inputs can be reduced, as additional information can be displayed alongside the parameter inputs for explanation.</p></sec><sec id="S11"><label>2.3</label><title>Report generation</title><p id="P33">Comparison of the outputs of different tomogram reconstruction workflows is facilitated in Ot2Rec by automatically generated reports, which contain a workflow diagram describing the plugins that have been applied, selected input parameters, and performance metrics for each plugin. This report is generated for the entire project, allowing the user to evaluate the reconstruction process for all tilt series in the project at a glance. These reports can be generated in a document, slideshow or Jupyter notebook format<sup>(<xref ref-type="bibr" rid="R34">34</xref>)</sup>, allowing users to customise how they would like to interact with the report. Reports for all the case studies in this work are included in the <xref ref-type="supplementary-material" rid="SD1">Supplementary Information</xref> as examples.</p></sec></sec><sec id="S12"><label>3</label><title>Case Studies</title><sec id="S13"><label>3.1</label><title>Case Study 1: Semi-automatic processing of large datasets</title><p id="P34">Tomographic image processing is often performed manually, with users processing one tilt-series at a time. Scripts can be written to automate some of the procedures especially for those being carried out using command-line programs, such as MotionCor2, though this can be difficult and frustrating for many users without a programming background. Ot2Rec enables users to automatically set up and apply a reconstruction workflow to entire datasets of several tilt series at once, without any scripting or individual processing of datasets. A report can be automatically generated at the end for the user to evaluate the performance of the reconstruction process on all tilt series at a glance.</p><p id="P35">Here, we demonstrate the use of Ot2Rec to reconstruct tomograms from the EMPIAR-10364 dataset<sup>(<xref ref-type="bibr" rid="R35">35</xref>)</sup>. This dataset consisted of 17 tilt series of <italic>E. coli</italic> minicells acquired on a Titan Krios at the electron Bio-Imaging Centre, Diamond Light Source. Each tilt series had 60 projections from –60° to +60° in 2° increments. The movie taken at each tilt angle contained 5 frames. Images were binned by a factor of 2 at the alignment step for faster processing, and no binning was applied in reconstruction for a final bin factor of 2x between the raw data and tomogram. Motion correction was performed with MotionCor2, and alignment and weighted back-projection (WBP) reconstruction were performed with IMOD. See <xref ref-type="sec" rid="S19">Section 5</xref> for more details.</p><p id="P36">Ot2Rec substantially reduced the amount of user intervention required to process tomograms as configured workflows are automatically applied to all tilt series in the dataset. Typically, the user would have to take each individual tilt series through several software packages, which is feasible for experiments with a few tilt series, but quickly becomes a bottleneck when scaling to dozens or hundreds of tilt series. This case study shows that typical reconstruction workflows with popular software tools can be deployed with Ot2Rec for large datasets, with the potential for automated parameter tuning to determine the optimum reconstruction workflow in the future.</p><p id="P37">The report generated summarised the performance of each step in the reconstruction process. First, a diagram showing the processes run on the dataset is shown (<xref ref-type="fig" rid="F3">Figure 3a</xref>). The shifts between frames reported by MotionCor2 were within 1–2 pixels and fairly uniform across all tilt series (<xref ref-type="fig" rid="F3">Figure 3b</xref>). The average shifts between patches from the alignment patch-tracking step were between 10 and 38 Angstroms, and all tilt series had relatively similar shifts (<xref ref-type="fig" rid="F3">Figure 3c</xref>). The report also contains representative thumbnails of the central x-y, x-z, and y-z slices of every tomogram, allowing users to visually assess all tomograms at once. The full report for this case study is available in the <xref ref-type="supplementary-material" rid="SD1">Supplementary Information</xref>.</p></sec><sec id="S14"><label>3.2</label><title>Case Study 2: Demonstration and testing of prototype features</title><p id="P38">Implementing custom plugins in Ot2Rec enables rapid development and deployment of bespoke algorithms and tools which can easily be integrated into existing tomogram reconstruction workflows. This case study demonstrates the results of a custom plugin called CTFSim, and how this bespoke tool was used in conjunction with other existing Ot2Rec plugins to enhance the quality of the reconstructed tomograms.</p><p id="P39">This case study investigated the use of deconvolution to improve contrast with the CTF estimated from CTFSim on tomograms of human choriocarcinoma cells (<xref ref-type="fig" rid="F4">Figure 4</xref>). Images were acquired on a Titan Krios at the electron Bio-Imaging Centre, Diamond Light Source. Each tilt series had 41 projections taken at –53° to +27° degrees in increments of 2°. Ot2Rec was used for motion correction, alignment, and reconstruction of the tomograms for all tilt series in the dataset. The tomograms were then deconvolved using the CTF estimated with the custom Ot2Rec plugin CTFSim (based on<sup>(<xref ref-type="bibr" rid="R28">28</xref>,<xref ref-type="bibr" rid="R47">47</xref>)</sup>; see Methods for details).</p><p id="P40">The improvement in image quality was measured using the contrast-to-noise ratio (CNR)<sup>(<xref ref-type="bibr" rid="R36">36</xref>)</sup>. Briefly, the signal was segmented from the background by thresholding the grey values with the automatically determined Otsu’s threshold<sup>(<xref ref-type="bibr" rid="R37">37</xref>)</sup>. The grey value distributions in the segmented signal and background regions were used to calculate the CNR.</p><p id="P41">The deconvolved tomograms showed improved contrast compared to the original, as shown visually and as measured by improved contrast-to-noise ratios (CNR) in the deconvolved images (<xref ref-type="fig" rid="F4">Figure 4</xref>). CNR was higher in the deconvolved tilt series compared to non-deconvolved, with the largest increase in CNR seen in tilt series 12 with deconvolution increasing CNR by 65.6% over the original tomogram.</p></sec><sec id="S15"><label>3.3</label><title>Case Study 3: Optimisation of tomogram reconstruction workflow</title><p id="P42">Reconstruction of tomograms is a multi-stage process, where the final tomogram quality is affected by the results of earlier stages. Therefore, optimisation of the entire workflow at each stage is necessary to obtain the best results. Ot2Rec provides the framework for this optimisation by enabling users to mix-and-match different software tools on the same tilt series, and compare these results in a single report.</p><p id="P43">In this case study, different combinations of alignment and reconstruction tools were applied to the same dataset, and Ot2Rec reports were generated to compare the performance of each (<xref ref-type="fig" rid="F5">Figure 5</xref>). This case study consisted of 23 tilt series composed of 41 projection images each ranging from −60° to +60° degrees.</p><p id="P44">After motion-correction, fiducial-less alignment of the tilt series was performed with either IMOD or AreTomo, followed by reconstruction with either IMOD simultaneous iterative reconstruction technique (SIRT), AreTomo simultaneous algebraic reconstruction technique (SART), or Savu conjugate gradient least squares (CGLS) reconstruction. Different combinations of alignment and reconstruction methods were expected to produce different results, which will be investigated in this section. The full reports for this case study are available in the <xref ref-type="supplementary-material" rid="SD1">Supplementary Information</xref>.</p><p id="P45">The shifts reported at the motion correction stage were found to be much larger for tilt series 13 onwards (<xref ref-type="fig" rid="F6">Figure 6a</xref>), indicating a potential issue with tilt series acquisition from this and future datasets in the experiment. Shifts between patches in alignment were also larger overall for tilt series 13 onwards compared to the earlier datasets (<xref ref-type="fig" rid="F6">Figure 6b</xref>). Inspection of the tilt series data showed obstructed views at high tilt angles for those affected by large motion correction shifts. In the future, Ot2Rec could include metrics to determine low quality tilt angles to be excluded.</p><p id="P46">An example tomogram (tilt series 18) affected by the large shifts observed in motion correction was chosen to demonstrate differences in outcomes associated with each workflow (<xref ref-type="fig" rid="F5">Figure 5b</xref>). Savu CGLS reconstruction failed with the IMOD aligned data, but not with the AreTomo alignment, and the resultant tomogram had reasonable image quality. However, the CGLS reconstruction had lower contrast than the SIRT or SART reconstruction methods of IMOD or AreTomo. Reconstruction with AreTomo’s SART was successful for both alignment methods (IMOD and AreTomo) with very few visual differences observed between the two outcomes. The IMOD SIRT reconstruction using IMOD alignments also produces a reasonable output which is visually similar to the AreTomo SART reconstructions created from either IMOD or AreTomo alignments. IMOD reconstruction using AreTomo alignments are not currently supported in Ot2Rec, but will be in the future.</p></sec></sec><sec id="S16" sec-type="discussion"><label>4</label><title>Discussion</title><p id="P47">Ot2Rec enables reconstruction of tomograms from raw micrograph movies using a range of software tools, all within a single framework. This pipeline is distinct from available alternatives as users can choose different combinations of software tools to suit their specific experiment and automatically apply their workflow to several tilt series at once. Metadata is recorded at each stage and is easily retrievable from text files, and the performance of the overall reconstruction workflow is summarised in a human-readable, automatically generated report.</p><sec id="S17"><label>4.1</label><title>Future work</title><p id="P48">The case studies in this work have demonstrated that there are differences in the resultant tomograms from different reconstruction workflows. The reports generated by Ot2Rec also incorporate performance statistics from the individual plugins, e.g., shifts between patches in fiducial-less IMOD tilt series alignment. However, independently measured quality metrics for each stage of the workflow would enable a more equitable comparison of different software tools, so the user (and eventually an algorithm) can quantitatively choose the best combination of software tools and the optimum input parameters for each. The next steps for improving the Ot2Rec reporting system will include development and implementation of such metrics. For example, Fourier Ring Correlation between reconstructions of even and odd projections is a commonly adopted, though computationally intensive, measure of resolution in final tomograms, which could be used to compare reconstruction tools if they are applied on the same aligned tilt series<sup>(<xref ref-type="bibr" rid="R38">38</xref>)</sup>. In the future, tomograms could be reconstructed with a pre-defined range of software tools and selected input parameters, and the best overall workflow could be determined quantitatively and then applied to other tilt series in the experiment.</p><p id="P49">In the case study from <xref ref-type="sec" rid="S15">Section 3.3</xref>, the difference in motion correction shifts between the first 12 and the remaining tilt series was easily observed from the plot of shifts for all tilt series in the project. Observing performance of the tomogram reconstruction process over time can be used as an indication of the quality of the upstream processes (sample preparation, data collection, microscope health) - enabling facility managers to capture valuable data to correct issues at these stages efficiently. Performance in specific metrics could help troubleshoot potential issues, for example, consistent large deviations between calculated and input tilt angles from the alignment process could be a sign of issues with the microscope stage. Issues with poor quality images at specific tilt angles could also be detected and these images excluded from subsequent analysis.</p><p id="P50">Case Study 2 has demonstrated that custom image processing tools developed within the Ot2Rec framework can be integrated easily into existing image processing workflows, which is beneficial to both developers and users. For developers, maintenance and deployment efforts are significantly reduced as Ot2Rec already provides implementations for file handling of all intermediate steps in the tomography process. For users, customised image processing tools can be accessed quickly and tested alongside their existing workflows, all within a familiar framework.</p><p id="P51">Ot2Rec will also be extended to perform other cryo-ET processing tasks, e.g., denoising tomograms, 3D particle picking or sub-tomogram averaging. Some of these tasks will be supported in Ot2Rec by developing new plugins for existing software tools, or if no suitable tools are available, bespoke plugins can be developed which would then be available in conjunction with all the standard plugins in Ot2Rec. More work is needed to adapt the Ot2Rec architecture to handle iterative tasks which combine steps, e.g., simultaneous CTF correction and reconstruction as implemented in NovaCTF<sup>(<xref ref-type="bibr" rid="R39">39</xref>)</sup> by Obr and colleagues<sup>(<xref ref-type="bibr" rid="R40">40</xref>)</sup>, or iterative alignment and reconstruction<sup>(<xref ref-type="bibr" rid="R41">41</xref>)</sup>. And further work is needed to enable a more automated approach that combines multiple plugins into a workflow that can be launched with a single command.</p></sec><sec id="S18" sec-type="conclusions"><label>4.2</label><title>Conclusion</title><p id="P52">Ot2Rec currently includes the canonical initial steps of tilt series reconstruction, necessary for either sub-tomogram averaging or segmentation. Alongside of this, it also contains prototype plugins allowing for deconvolution of tomograms to enhance contrast. Ot2Rec acts both as an open-source wrapper with a simple unified plugin structure and a developer and user friendly prototyping tool for new plugins. The reporting functionality provides easy-to-access information, enabling comparisons and optimisation of parameters and software packages. The further development of this pipeline opens the door to options such as automated data processing parameter tuning based on the purpose of data collection or automatic monitoring of upstream steps such as microscope health. Continued open-source cross-software development of the cryoET pipeline with a focus on ease-of-interaction for both the user and developer is the future of cryoET data processing.</p></sec></sec><sec id="S19" sec-type="methods"><label>5</label><title>Methods</title><sec id="S20"><label>5.1</label><title>Sample preparation and image acquisition</title><sec id="S21"><label>5.1.1</label><title>Case Study 1</title><p id="P53">Details of the sample preparation and image acquisition protocols are available in the original publication for the EMPIAR dataset<sup>(<xref ref-type="bibr" rid="R35">35</xref>)</sup>.</p><p id="P54">For this study, motion correction of the micrographs was performed using MotionCor2, followed by a fiducial-less (patch tracking based) tilt series alignment using IMOD. The patch-tracking algorithm was configured such that there were 24 x 24 patches, each patch with the dimensions of 210 x 203 pixels, allowing a 15% overlap between patches. The aligned stacks were binned by a factor of 2 before tomogram reconstruction, which was also performed using the batchruntomo tool in the IMOD suite using the default weighted back-projection (WBP) algorithm. The unbinned thickness of the volume was set to 1920 px (% 861Å), such that after the overall factor-2 binning, the dimensions of the output tomograms are 1920 x 1856 x 1920 pixels, with the pixel spacing of 4.486A in all dimensions. Specific parameters used in Ot2Rec for this case study are in <xref ref-type="supplementary-material" rid="SD1">Table S1</xref>.</p><p id="P55">In all case studies presented in this paper, processing was performed on a virtual machine with 12 Intel Xeon Gold 5218 2.30GHz CPUs and 1 Tesla V100 GP.</p></sec><sec id="S22"><label>5.1.2</label><title>Case Study 2</title><p id="P56">JEG-3 human choriocarcinoma cell line was purchased from Merck Life Science (UK) and cultured in Dulbecco’s modified Eagle’s media (DMEM/F-12, HEPES, Gibco, 11330057) supplemented with 10% fetal bovine serum (Gibco, 10500) and 1% Penicillin-streptomycin (10,000U/ml, Gibco, 11548876). Cells were cultured in T75 flasks and incubated at 37°C with 5% CO<sub>2</sub>.</p><p id="P57">200 mesh gold holey carbon grids (either R2/2 Quantifoil or R3.5/1 Quantifoil, Agar scientific) were sterilised by dipping into 100% ethanol for 2-5min and rinsing with phosphate buffered saline (PBS) (Gibco, 10010). The grids were coated with 30μl of 1:20 fibronectin (Merck, F0895) in PBS, and kept in the incubator for 2 hours. The grids were then rinsed with PBS two times and put in a petri dish containing JEG-3 media, and incubated at 37°C and 5% CO<sub>2</sub> for overnight.</p><p id="P58">Prior to cell seeding, the grids were transferred into a 6-well plate (one grid per well) containing fresh JEG-3 media. A total number of trypsinised JEG-3 (3x10<sup>4</sup> cells) were seeded directly onto each grid. The cells were then allowed to settle in the incubator for 2-3 days until they were well spread on the grids.</p><p id="P59">For vitrification, the GP2 (Leica) was used. The humidity-controlled chamber was set to reach &gt;80% humidity. After the grid containing the cells was placed into the GP2, a 2.5 <italic>μl</italic> JEG-3 medium droplet was applied onto the EM grid, and the grid was blotted from the reverse side for 6-10sec. The grid was plunged into liquid ethane, and the frozen grids were stored until focused ion beam (FIB) milling was performed.</p><p id="P60">Prior to the FIB milling, the frozen EM grids were clipped into clip rings (ThermoFisher). Scios scanning electron microscope (ThermoFisher) at the electron Bio-Imaging Centre at Diamond Light Source was used to perform the FIB milling. Gallium ion beams were used to mill the cellular samples to a lamella thickness of 200nm. The ion beam parameters were set to 30kV beam energy, and 50pA-0.3nA beam current (for coarse milling) and 30pA (for fine milling). The grids with FIB-milled lamellae were stored again until cryoET was undertaken using a Titan Krios (ThermoFisher Scientific) at 300kV at eBIC. Each tilt series had 41 projections taken at –53° to +27° degrees in increments of 2° using a dose symmetric imaging scheme<sup>(<xref ref-type="bibr" rid="R18">18</xref>)</sup>. Data were collected using a Falcon 4i SelectrisX at 64,000x magnification (1.97 A/pixel).</p><p id="P61">Motion correction of the micrographs was first performed with MotionCor2, followed by the estimation of the true defocus values using CTFFind4 on a <italic>per-micrograph</italic> basis. The CTFFind4 outputs were then processed using the CTFSim plugin, an Ot2Rec prototype feature, which also simulated and internally reconstructed the 3D PSF of the tilt series. The PSF volumes were truncated to the central 30 x 30 x 30 pixels as the PSF is fast-declining by nature.</p><p id="P62">Fiducial-less tilt series alignment was performed on the motion-corrected micrographs using IMOD. The patch-tracking algorithm in IMOD was configured such that there were 24 x 24 patches, each patch with the dimensions of 224 pixels squared, allowing a 15% overlap between patches. The aligned stacks were binned by a factor of 8 before tomogram reconstruction. Reconstruction was also performed using the batchruntomo tool in the IMOD suite, and the default weighted back-projection (WBP) was used. The final tomograms have a thickness of 1496Å, which translates to an overall dimensions of 512 x 512 x 1000 pixels, given an overall binning factor of 8.</p><p id="P63">Lastly, the reconstructed tomograms were deconvolved using the RLDeconv tool in Ot2Rec, with the corresponding simulated PSF volumes as deconvolution kernels. Specific parameters used in Ot2Rec for this case study are in <xref ref-type="supplementary-material" rid="SD1">Table S2</xref>.</p><p id="P64">The contrast-to-noise ratio (CNR), as defined in <xref ref-type="disp-formula" rid="FD1">Eq. (1)</xref><sup>(<xref ref-type="bibr" rid="R36">36</xref>)</sup>, was used to compare the tomograms before and after deconvolution with CTFSim and RLDeconv. <disp-formula id="FD1"><label>(1)</label><mml:math id="M1"><mml:mrow><mml:mi>C</mml:mi><mml:mi>N</mml:mi><mml:mi>R</mml:mi><mml:mo>=</mml:mo><mml:mfrac><mml:mrow><mml:mo>|</mml:mo><mml:msub><mml:mi>μ</mml:mi><mml:mn>1</mml:mn></mml:msub><mml:mo>−</mml:mo><mml:msub><mml:mi>μ</mml:mi><mml:mn>2</mml:mn></mml:msub><mml:mo>|</mml:mo></mml:mrow><mml:mrow><mml:msqrt><mml:mrow><mml:msub><mml:mi>σ</mml:mi><mml:mn>1</mml:mn></mml:msub><mml:msup><mml:mrow/><mml:mn>2</mml:mn></mml:msup><mml:mo>+</mml:mo><mml:msub><mml:mi>σ</mml:mi><mml:mn>2</mml:mn></mml:msub><mml:msup><mml:mrow/><mml:mn>2</mml:mn></mml:msup></mml:mrow></mml:msqrt></mml:mrow></mml:mfrac></mml:mrow></mml:math></disp-formula> where <italic>μ<sub>1</sub>,μ<sub>2</sub>,σ<sub>1</sub>,σ<sub>2</sub></italic> are the average grey-values of the signal, that of the background, the standard deviation of signal grey-values, and that of the background grey-values respectively.</p><p id="P65">The CNR was calculated from the central 90% of the original and deconvolved volumes in the z-direction. Then for each z-slice in a volume, the Ōtsu threshold<sup>(<xref ref-type="bibr" rid="R37">37</xref>)</sup> was calculated and used for separating <sup><xref ref-type="fn" rid="FN1">1</xref></sup> the signal from the background (cf. masks shown in red in the second row of <xref ref-type="fig" rid="F4">Fig 4b</xref>). The CNRs of the t-th z-slices of the two volumes were calculated using <xref ref-type="disp-formula" rid="FD1">Eq. (1)</xref>. The ratio between the CNR of the deconvolved volume and that of the original tomogram was calculated to gauge the extent of enhancement in image contrast. A value over 1 signifies a positive boost in image contrast after deconvolution.</p></sec><sec id="S23"><label>5.1.3</label><title>Case Study 3</title><p id="P66">Primary cortical neurons of embryonic C57BL/6J mice were dissociated and seeded on Quantifoil<sup>®</sup> R 2/2 SiO2 Au200 grids that were glow discharged using a GloCube<sup>®</sup> Plus (Quorum) at 20mA for 30s and treated with 0.1mg mL-1 Poly-D-Lysine (Gibco) at 37°C overnight and rinsed with PBS and left to dry. Cells were seeded onto grids and maintained in Neurobasal<sup>®</sup> Medium (Gibco) supplemented with B-27TM (Gibco), 1% penicillin/streptomycin (Gibco), 2mM Glutamate (Gibco). 20% of the volume of old media was replaced with fresh media every 3-4 days. Cells were plunge frozen on DIV 14.</p><p id="P67">Data were collected with a Titan Krios G4 (ThermoFisher Scientific) transmission cryo-electron microscope at 300kV equipped with a cold field emission source gun, a Selectris (ThermoFisher Scientific) electron imaging filter, and a post-imaging filter mounted Falcon 4 (ThermoFisher Scientific) direct electron detector. Tilt series were acquired at 81,000x magnification (pixel size 1.47Å) in a dose symmetric tilt scheme<sup>(<xref ref-type="bibr" rid="R18">18</xref>)</sup> with a tilt range of -60° to 60° imaging at 3° increments, with 2e<sup>-</sup>/Å dose per tilt image. Tilt series were acquired using Tomography software (ThermoFisher Scientific) and collected as EER files<sup>(<xref ref-type="bibr" rid="R42">42</xref>)</sup>.</p><p id="P68">Motion correction was first performed with MotionCor2<sup>(<xref ref-type="bibr" rid="R26">26</xref>)</sup>. Next, fiducial-less tilt series alignment was performed with IMOD<sup>(<xref ref-type="bibr" rid="R29">29</xref>,<xref ref-type="bibr" rid="R30">30</xref>)</sup> and AreTomo 1.1.0<sup>(<xref ref-type="bibr" rid="R31">31</xref>)</sup>. In both cases, a binning factor of 8 was used. The IMOD aligned data was reconstructed with three methods: IMOD simultaneous iterative reconstruction technique (SIRT), AreTomo simultaneous algebraic reconstruction technique (SART), and Savu conjugate gradient least squares (CGLS) reconstruction via the ASTRA reconstruction tool-box<sup>(<xref ref-type="bibr" rid="R43">43</xref>–<xref ref-type="bibr" rid="R45">45</xref>)</sup>. The AreTomo aligned tilt series was reconstructed with AreTomo SART and Savu CGLS, though IMOD reconstruction will be supported in later versions of Ot2Rec. Specific parameters used in Ot2Rec for this case study are in <xref ref-type="supplementary-material" rid="SD1">Table S3</xref>.</p></sec></sec><sec id="S24"><label>5.2</label><title>Prototype features</title><sec id="S25"><title>CTFSim</title><p id="P69">As mentioned previously, the program CTFFind4 is a tool used for estimating the <italic>true</italic> defocus value for each micrograph collected. However, whilst it produces parameters for determining the shape of the contrast transfer function (CTF) associated with the microscope settings, it does not directly have the CTF as a standard output. In view of this, we developed an in-house plugin, named CTFSim, to simulate the CTF of the micrograph by reverse-engineering the equations described in the Rohou <italic>et al</italic>. paper<sup>(<xref ref-type="bibr" rid="R28">28</xref>,<xref ref-type="bibr" rid="R46">46</xref>)</sup> <disp-formula id="FD2"><label>(2)</label><mml:math id="M2"><mml:mrow><mml:mi>C</mml:mi><mml:mi>T</mml:mi><mml:mi>F</mml:mi><mml:mo stretchy="false">(</mml:mo><mml:mi>λ</mml:mi><mml:mo>,</mml:mo><mml:mstyle mathvariant="bold" mathsize="normal"><mml:mi>g</mml:mi></mml:mstyle><mml:mo>,</mml:mo><mml:mi>Δ</mml:mi><mml:mi>f</mml:mi><mml:mo>,</mml:mo><mml:msub><mml:mi>C</mml:mi><mml:mi>s</mml:mi></mml:msub><mml:mo>,</mml:mo><mml:mi>Δ</mml:mi><mml:mi>φ</mml:mi><mml:mo>,</mml:mo><mml:msub><mml:mi>w</mml:mi><mml:mn>2</mml:mn></mml:msub><mml:mo stretchy="false">)</mml:mo><mml:mo>=</mml:mo><mml:mo>−</mml:mo><mml:mi>sin</mml:mi><mml:mo stretchy="false">(</mml:mo><mml:mi>χ</mml:mi><mml:mo stretchy="false">(</mml:mo><mml:mi>λ</mml:mi><mml:mo>,</mml:mo><mml:mstyle mathvariant="bold" mathsize="normal"><mml:mi>g</mml:mi></mml:mstyle><mml:mo>,</mml:mo><mml:mi>Δ</mml:mi><mml:mi>f</mml:mi><mml:mo>,</mml:mo><mml:msub><mml:mi>C</mml:mi><mml:mi>s</mml:mi></mml:msub><mml:mo>,</mml:mo><mml:mi>Δ</mml:mi><mml:mi>φ</mml:mi><mml:mo>,</mml:mo><mml:msub><mml:mi>w</mml:mi><mml:mn>2</mml:mn></mml:msub><mml:mo stretchy="false">)</mml:mo><mml:mo stretchy="false">)</mml:mo></mml:mrow></mml:math></disp-formula> with <disp-formula id="FD3"><label>(3)</label><mml:math id="M3"><mml:mrow><mml:mi>χ</mml:mi><mml:mo stretchy="false">(</mml:mo><mml:mi>λ</mml:mi><mml:mo>,</mml:mo><mml:mstyle mathvariant="bold" mathsize="normal"><mml:mi>g</mml:mi></mml:mstyle><mml:mo>,</mml:mo><mml:mi>Δ</mml:mi><mml:mi>f</mml:mi><mml:mo>,</mml:mo><mml:msub><mml:mi>C</mml:mi><mml:mi>s</mml:mi></mml:msub><mml:mo>,</mml:mo><mml:mi>Δ</mml:mi><mml:mi>φ</mml:mi><mml:mo>,</mml:mo><mml:msub><mml:mi>w</mml:mi><mml:mn>2</mml:mn></mml:msub><mml:mo stretchy="false">)</mml:mo><mml:mo>=</mml:mo><mml:mi>π</mml:mi><mml:mi>λ</mml:mi><mml:mo>|</mml:mo><mml:mstyle mathvariant="bold" mathsize="normal"><mml:mi>g</mml:mi></mml:mstyle><mml:msup><mml:mo>|</mml:mo><mml:mn>2</mml:mn></mml:msup><mml:mrow><mml:mo>(</mml:mo><mml:mrow><mml:mi>Δ</mml:mi><mml:mi>f</mml:mi><mml:mo>−</mml:mo><mml:mfrac><mml:mn>1</mml:mn><mml:mn>2</mml:mn></mml:mfrac><mml:msup><mml:mi>λ</mml:mi><mml:mn>2</mml:mn></mml:msup><mml:mo>|</mml:mo><mml:mstyle mathvariant="bold" mathsize="normal"><mml:mi>g</mml:mi></mml:mstyle><mml:msup><mml:mo>|</mml:mo><mml:mn>2</mml:mn></mml:msup><mml:msub><mml:mi>C</mml:mi><mml:mi>s</mml:mi></mml:msub></mml:mrow><mml:mo>)</mml:mo></mml:mrow><mml:mo>+</mml:mo><mml:mi>Δ</mml:mi><mml:mi>φ</mml:mi><mml:mo>+</mml:mo><mml:mi>arctan</mml:mi><mml:mrow><mml:mo>(</mml:mo><mml:mrow><mml:mfrac><mml:mrow><mml:msub><mml:mi>w</mml:mi><mml:mn>2</mml:mn></mml:msub></mml:mrow><mml:mrow><mml:msqrt><mml:mrow><mml:mn>1</mml:mn><mml:mo>−</mml:mo><mml:msub><mml:mi>w</mml:mi><mml:mn>2</mml:mn></mml:msub><mml:msup><mml:mrow/><mml:mn>2</mml:mn></mml:msup></mml:mrow></mml:msqrt></mml:mrow></mml:mfrac></mml:mrow><mml:mo>)</mml:mo></mml:mrow></mml:mrow></mml:math></disp-formula> where <italic>λ</italic> is the associated electron wavelength, <bold>g</bold> is the spatial frequency vector, <italic>Δf</italic> is the defocus value evaluated from CTFFind4, <italic>C<sub>s</sub></italic> is the spherical aberration, <italic>Δφ</italic> is the phase shift, and the value <italic>w<sub>2</sub></italic> is associated with the relative phase contrast w<sub>1</sub> via the relation <inline-formula><mml:math id="M4"><mml:mrow><mml:msub><mml:mi>w</mml:mi><mml:mn>1</mml:mn></mml:msub><mml:mo>=</mml:mo><mml:msqrt><mml:mrow><mml:mn>1</mml:mn><mml:mo>−</mml:mo><mml:msub><mml:mi>w</mml:mi><mml:mn>2</mml:mn></mml:msub><mml:msup><mml:mrow/><mml:mn>2</mml:mn></mml:msup></mml:mrow></mml:msqrt></mml:mrow></mml:math></inline-formula>.</p><p id="P70">By definition, the CTF is a function defined in the complex reciprocal space, and is hence rather difficult to visualise and use “as is”. Therefore, an additional feature of the CTFSim is to convert the simulated two-dimensional CTF to the point spread function (PSF) in the real space via a direct inverse Fourier transform. Lastly, since the CTF (and PSF) are calculated using the size of the motion-corrected micrographs, these images would have the same size of those micrographs. However, due to the quick-decaying feature of the PSF, the user can choose to truncate the resultant PSF image to a certain size (e.g. 30 pixels squared, by default) in order to facilitate further usage of the obtained results.</p><p id="P71">Once the per-micrograph 2D PSF profiles for a tilt-series are simulated, CTFSim reconstructs the profiles internally using the Weighted Backprojection (WBP) algorithm into a tomogram of the PSF.</p><p id="P72">As suggested in Croxford <italic>et al</italic>.<sup>(<xref ref-type="bibr" rid="R47">47</xref>)</sup>, the <italic>cropped</italic> 3D PSF is post-processed in a three-step process. The PSF tomogram is firstly converted into the 3D CTF with a Fourier transform. Then the pixels are “normalised”<sup><xref ref-type="fn" rid="FN2">2</xref></sup> through a division by the value at zero-frequency (i.e. |<bold>g</bold>| = 0). Lastly, the normalised CTF stack is converted back to the PSF in real-space via an inverse Fourier transform.</p><p id="P73">Finally, the processed PSF is then normalised by dividing the array elements by the global maximum of the array. Although it can be derived trivially from <xref ref-type="disp-formula" rid="FD5">eq.5</xref> that the analytical output of the iterations should be independent of a linear scaling of the PSF, numerically speaking it is still a multi-step process and an unnormalised PSF could potentially cause numerical instabilities especially in the first fraction in <xref ref-type="disp-formula" rid="FD5">eq.5</xref>. Therefore we assert that if the PSF is to be used to deconvolve the raw tomogram via the Richardson-Lucy scheme, this extra operation is necessary.</p></sec><sec id="S26"><title>RLFDeconv</title><p id="P74">The blurring of images due to the optical or electronic properties of the PSF has long been a concern for microscopists. In transmission electron microscopy, the obtained image can be modelled, in the simplest form, as<sup>(<xref ref-type="bibr" rid="R48">48</xref>)</sup> <disp-formula id="FD4"><label>(4)</label><mml:math id="M5"><mml:mrow><mml:msub><mml:mi>I</mml:mi><mml:mn>0</mml:mn></mml:msub><mml:mo>=</mml:mo><mml:msub><mml:mi>I</mml:mi><mml:mrow><mml:mi>p</mml:mi><mml:mi>e</mml:mi><mml:mi>r</mml:mi><mml:mtext> </mml:mtext><mml:mi>f</mml:mi></mml:mrow></mml:msub><mml:mo>⊗</mml:mo><mml:mi>P</mml:mi><mml:mi>S</mml:mi><mml:mi>F</mml:mi><mml:mo>+</mml:mo><mml:mi mathvariant="script">N</mml:mi></mml:mrow></mml:math></disp-formula> where <italic>I<sub>0</sub></italic> is the final output image, <italic>I<sub>per f</sub></italic> is the perfect image, <inline-formula><mml:math id="M6"><mml:mi mathvariant="script">N</mml:mi></mml:math></inline-formula> is a stochastic noise term obeying Poisson distribution, and ⊗ denotes the convolution operation. In order to reverse-engineer the perfect image <italic>I<sub>per f</sub></italic>, an inverse operation must be carried out. We note that <xref ref-type="disp-formula" rid="FD4">Eq.4</xref> cannot be solved exactly with any analytical or numerical method, since the noise term is unknown and cannot be isolated from the output image. Hence to obtain a reasonable solution, an approximation is necessary. Here a common approximation is that the image signal-to-noise ratio is high enough such that the noise contribution can be ignored.</p><p id="P75">However, even with such approximation, the inverse of a convolution is still unsolvable by any analytical means, as the solution is non-unique. Therefore one needs to resort to an iterative approach numerically. In 1972 and 1974, Richardson and Lucy separately discovered an iterative scheme<sup>(<xref ref-type="bibr" rid="R49">49</xref>,<xref ref-type="bibr" rid="R50">50</xref>)</sup> that gives an approximation approaching an ideal solution as the number of iteration increases. Mathematically, the scheme reads <disp-formula id="FD5"><label>(5)</label><mml:math id="M7"><mml:mrow><mml:msub><mml:mi>I</mml:mi><mml:mrow><mml:mi>i</mml:mi><mml:mo>+</mml:mo><mml:mn>1</mml:mn></mml:mrow></mml:msub><mml:mo>=</mml:mo><mml:mrow><mml:mo>(</mml:mo><mml:mrow><mml:mfrac><mml:mrow><mml:msub><mml:mi>I</mml:mi><mml:mn>0</mml:mn></mml:msub></mml:mrow><mml:mrow><mml:msub><mml:mi>I</mml:mi><mml:mi>i</mml:mi></mml:msub><mml:mo>⊗</mml:mo><mml:mi>P</mml:mi><mml:mi>S</mml:mi><mml:mi>F</mml:mi></mml:mrow></mml:mfrac><mml:mo>⊗</mml:mo><mml:mover accent="true"><mml:mrow><mml:mi>P</mml:mi><mml:mi>S</mml:mi><mml:mi>F</mml:mi></mml:mrow><mml:mo stretchy="true">¯</mml:mo></mml:mover></mml:mrow><mml:mo>)</mml:mo></mml:mrow><mml:msub><mml:mi>I</mml:mi><mml:mi>i</mml:mi></mml:msub></mml:mrow></mml:math></disp-formula> <disp-formula id="FD6"><label>(6)</label><mml:math id="M8"><mml:mrow><mml:munder><mml:mrow><mml:mi>lim</mml:mi></mml:mrow><mml:mrow><mml:mi>i</mml:mi><mml:mo>→</mml:mo><mml:mi>∞</mml:mi></mml:mrow></mml:munder><mml:mtext> </mml:mtext><mml:msub><mml:mi>I</mml:mi><mml:mi>i</mml:mi></mml:msub><mml:mo>=</mml:mo><mml:msub><mml:mi>I</mml:mi><mml:mrow><mml:mi>p</mml:mi><mml:mi>e</mml:mi><mml:mi>r</mml:mi><mml:mtext> </mml:mtext><mml:mi>f</mml:mi></mml:mrow></mml:msub></mml:mrow></mml:math></disp-formula> where <italic>I<sub>i</sub></italic> is the image in the <italic>i</italic>-th step, and the over-bar on <italic>PSF</italic> denotes a flip operation of the <italic>PSF</italic>, hence <inline-formula><mml:math id="M9"><mml:mrow><mml:mover accent="true"><mml:mrow><mml:mi>P</mml:mi><mml:mi>S</mml:mi><mml:mi>F</mml:mi><mml:mo stretchy="false">(</mml:mo><mml:mi>x</mml:mi><mml:mo stretchy="false">)</mml:mo></mml:mrow><mml:mo stretchy="true">¯</mml:mo></mml:mover><mml:mo>≡</mml:mo><mml:mi>P</mml:mi><mml:mi>S</mml:mi><mml:mi>F</mml:mi><mml:mo stretchy="false">(</mml:mo><mml:mo>−</mml:mo><mml:mi>x</mml:mi><mml:mo stretchy="false">)</mml:mo></mml:mrow></mml:math></inline-formula>.</p><p id="P76">In Ot2Rec, rather than developing an in-house solver, we have implemented a wrapper plugin for the Python library RedLionfish<sup>(<xref ref-type="bibr" rid="R51">51</xref>)</sup> for performing the 3-dimensional deconvolution between a reconstructed tomogram and a simulated PSF stack (similarly reconstructed as the experimental tomogram). To facilitate the deconvolution of larger stacks, which might cause GPU/CPU memory issues, we also implemented the 3D version of the so-called “block-iterative” algorithm, inspired by Lee<sup>(<xref ref-type="bibr" rid="R52">52</xref>)</sup>, which breaks the volume (tomogram) into chunks, on each of which a normal Richardson-Lucy deconvolution is performed independently. The separately deconvolved chunks are then stitched back together. A merit of this method is that due to the massive reduction in the size of deconvolution operands, a much lower memory cost for the GPU/CPU can be achieved. However, the authors would like to emphasise that this block-iterative method must be used with care, as the padding setting in the convolution operations could introduce artefacts around the borders of the chunks as they are stitched back.</p></sec></sec><sec id="S27"><label>5.3</label><title>Basic usage guide</title><p id="P77">This short section is dedicated to explain the basics of user interaction with Ot2Rec.</p><sec id="S28"><label>5.3.1</label><title>Installation</title><p id="P78">Ot2Rec is an open-source Linux-based program. Its code repository can be accessed at <ext-link ext-link-type="uri" xlink:href="https://github.com/rosalindfranklininstitute/Ot2Rec">https://github.com/rosalindfranklininstitute/Ot2Rec</ext-link>.</p><p id="P79">The easiest way to install Ot2Rec is to download the shell script of the latest release from the Release tab on GitHub and execute the script on the command line.</p><p id="P80">An alternative method of installation, should the user wish to build the software from source, is to clone the repository to the local environment. As Ot2Rec uses miniconda, it is recommended that the user first create a new conda virtual environment (“venv”) with Python 3.8 (or above) pre-installed. Once the venv is loaded, the user can then use the command <monospace>pip install</monospace>. in the cloned root folder to automatically install Ot2Rec and its dependencies locally.</p></sec></sec><sec id="S29"><label>5.4</label><title>Basic usage</title><p id="P81">Once the virtual environment has been activated, all Ot2Rec command-line functions are available in the terminal, which generates the corresponding GUI for each plugin. All Ot2Rec commands follow a specific format which has been summarised in <xref ref-type="table" rid="T2">Table 2</xref>.</p><p id="P82">To start an image processing pipeline with Ot2Rec, the first command to be used is <monospace>o2r.new</monospace>. With this, a GUI will be displayed, allowing the user to enter some essential project-dependent parameters, with which Ot2Rec will aggregate the master metadata for downstream operations.</p><p id="P83">For subsequent steps, all the plugins contain a <monospace>new</monospace> and a <monospace>run</monospace> function. The <monospace>new</monospace> commands, like the previous <monospace>o2r.new</monospace>, prompt the user to input essential parameters for the specified plugin, then collect and pre-propulate the configuration files with metadata from previous steps. The <monospace>run</monospace> commands look for the relevant configuration files and previous metadata records, and execute the specified plugin. For all <monospace>run</monospace> operations, the project name (as defined by the user at the beginning with the <monospace>o2r.new</monospace> command) is required as a command-line argument, as it is used for seeking the correct configuration files.</p></sec></sec><sec sec-type="supplementary-material" id="SM"><title>Supplementary Material</title><supplementary-material content-type="local-data" id="SD1"><label>Supplementary Material</label><media xlink:href="EMS158950-supplement-Supplementary_Material.pdf" mimetype="application" mime-subtype="pdf" id="d92aAdFbB" position="anchor"/></supplementary-material></sec></body><back><ack id="S30"><title>Acknowledgements</title><p>We acknowledge Diamond Light Source for access and support of the cryo-EM facilities at the UK’s national Electron Bio-imaging Centre (eBIC), funded by the Wellcome Trust, MRC and BBRSC. We also thank eBIC for ongoing collaboration and feedback on Ot2Rec and providing the initial scripts on which Ot2Rec was based.</p><p>We also thank the Core Team at the Artificial Intelligence &amp; Informatics Theme at the Rosalind Franklin Institute, especially Drs. Joss Whittle and Laura Shemilt, for their help in configuring the computing infrastructure for running and testing of Ot2Rec.</p><sec id="S31"><title>Funding Statement</title><p>The Rosalind Franklin Institute is funded by UK Research and Innovation through the Engineering and Physical Sciences Research Council. Funding was also provided by the Wellcome Trust through the Electrifying Life Science grants 220526/Z/20/Z.</p></sec></ack><sec id="S32" sec-type="data-availability"><title>Data Availability Statement</title><p id="P84">The GitHub repository of Ot2Rec is open-source and can be accessed at <ext-link ext-link-type="uri" xlink:href="https://github.com/rosalindfranklininstitute/Ot2Rec">https://github.com/rosalindfranklininstitute/Ot2Rec</ext-link>. Ot2Rec Report is also open-source and is available at <ext-link ext-link-type="uri" xlink:href="https://github.com/rosalindfranklininstitute/ot2rec_report">https://github.com/rosalindfranklininstitute/ot2rec_report</ext-link>. All data used in this manuscript can be found on EMPIAR (case study 1: EMPIAR-10364; case study 2: EMPIAR-XXXXX; case study 3: EMPIAR-XXXXX).</p></sec><fn-group><fn id="FN1"><label>1</label><p id="P85">NB. This is only a rudimentary measures to pick out potential signals, and is by no means an attempt to automatically segment useful features from the slice.</p></fn><fn id="FN2"><label>2</label><p id="P86">We acknowledge that this use of “normalisation”, directly quoted from the source, may be an abuse of terminology, as the normalisation of a complex matrix is usually defined as the division by the norm of the matrix of associated moduli, rather than by the value at | <bold>g</bold>| = 0.</p></fn><fn id="FN3" fn-type="conflict"><p id="P87"><bold>Competing Interests.</bold> M.C.D. is an employee of SPT Labtech. The remaining authors declare that they have no competing interests</p></fn><fn id="FN4"><p id="P88"><bold>Ethical Standards.</bold> The research meets all ethical guidelines, including adherence to the legal requirements of the study country.</p></fn><fn id="FN5" fn-type="con"><p id="P89"><bold>Author Contributions.</bold> Software development: NBY; EMLH. Data acquisition: WT; JLRS; MG. Data processing: NBY; EMLH. Writing original draft: NBY; EMLH; WT; MD; MCD; MB. All authors approved the final submitted draft.</p></fn></fn-group><ref-list><ref id="R1"><label>1</label><element-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Schmid</surname><given-names>M</given-names></name></person-group><article-title>Chapter 2 - Single-particle electron cryotomography</article-title><source>Adv Protein Chem Struct Biol</source><year>2011</year><volume>82</volume><fpage>37</fpage><lpage>65</lpage><pub-id pub-id-type="pmid">21501818</pub-id></element-citation></ref><ref id="R2"><label>2</label><element-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Briggs</surname><given-names>JAG</given-names></name></person-group><article-title>Structural biology <italic>in situ</italic> - the potential of subtomogram averaging</article-title><source>Curr Opin Struct Biol</source><year>2013</year><volume>23</volume><issue>2</issue><fpage>261</fpage><lpage>267</lpage><pub-id pub-id-type="pmid">23466038</pub-id></element-citation></ref><ref id="R3"><label>3</label><element-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Forster</surname><given-names>F</given-names></name><name><surname>Hegerl</surname><given-names>R</given-names></name></person-group><article-title>Structure Determination <italic>In Situ</italic> by Averaging of Tomograms</article-title><source>Methods Cell Biol</source><year>2007</year><volume>79</volume><fpage>741</fpage><lpage>767</lpage><pub-id pub-id-type="pmid">17327182</pub-id></element-citation></ref><ref id="R4"><label>4</label><element-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Schur</surname><given-names>FK</given-names></name><etal/></person-group><article-title>Determination of protein structure at 8.5 A resolution using cryo-electron tomography and sub-tomogram averaging</article-title><source>J Struct Bio</source><year>2013</year><volume>184</volume><issue>3</issue><fpage>394</fpage><lpage>400</lpage><pub-id pub-id-type="pmid">24184468</pub-id></element-citation></ref><ref id="R5"><label>5</label><element-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Dai</surname><given-names>W</given-names></name><etal/></person-group><article-title>Visualizing virus assembly intermediates inside marine cyanobacteria</article-title><source>Nature</source><year>2013</year><volume>502</volume><fpage>707</fpage><lpage>710</lpage><pub-id pub-id-type="pmcid">PMC3984937</pub-id><pub-id pub-id-type="pmid">24107993</pub-id><pub-id pub-id-type="doi">10.1038/nature12604</pub-id></element-citation></ref><ref id="R6"><label>6</label><element-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Sutton</surname><given-names>G</given-names></name><etal/></person-group><article-title>Assembly intermediates of orthoreovirus captured in the cell</article-title><source>Nat Commun</source><year>2020</year><volume>11</volume><elocation-id>4445</elocation-id><pub-id pub-id-type="pmcid">PMC7477198</pub-id><pub-id pub-id-type="pmid">32895380</pub-id><pub-id pub-id-type="doi">10.1038/s41467-020-18243-9</pub-id></element-citation></ref><ref id="R7"><label>7</label><element-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Wu</surname><given-names>G</given-names></name><etal/></person-group><article-title>Multi-scale 3D Cryo-Correlative Microscopy for Vitrified Cells</article-title><source>Structure</source><year>2020</year><volume>28</volume><issue>11</issue><fpage>1231</fpage><lpage>1237</lpage><pub-id pub-id-type="pmcid">PMC7642057</pub-id><pub-id pub-id-type="pmid">32814034</pub-id><pub-id pub-id-type="doi">10.1016/j.str.2020.07.017</pub-id></element-citation></ref><ref id="R8"><label>8</label><element-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Schertel</surname><given-names>A</given-names></name><etal/></person-group><article-title>Cryo FIB-SEM: Volume imaging of cellular ultrastructure in native frozen specimens</article-title><source>J Struct Bio</source><year>2013</year><volume>184</volume><issue>2</issue><fpage>355</fpage><lpage>360</lpage><pub-id pub-id-type="pmid">24121039</pub-id></element-citation></ref><ref id="R9"><label>9</label><element-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Zhu</surname><given-names>Y</given-names></name><etal/></person-group><article-title>Serial cryoFIB/SEM Reveals Cytoarchitectural Disruptions in Leigh Syndrome Patient Cells</article-title><source>Structure</source><year>2021</year><volume>29</volume><issue>1</issue><fpage>82</fpage><lpage>87</lpage><pub-id pub-id-type="pmcid">PMC7802768</pub-id><pub-id pub-id-type="pmid">33096015</pub-id><pub-id pub-id-type="doi">10.1016/j.str.2020.10.003</pub-id></element-citation></ref><ref id="R10"><label>10</label><element-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Dubochet</surname><given-names>J</given-names></name><etal/></person-group><article-title>Cryo-electron microscopy of vitrified specimens</article-title><source>Quart Rev Biophys</source><year>1988</year><volume>21</volume><issue>2</issue><fpage>192</fpage><lpage>228</lpage><pub-id pub-id-type="pmid">3043536</pub-id></element-citation></ref><ref id="R11"><label>11</label><element-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Dahl</surname><given-names>R</given-names></name><name><surname>Staehelin</surname><given-names>A</given-names></name></person-group><article-title>High-pressure Freezing for the preservation of biological structure: Theory and practice</article-title><source>J Electron Microsc Tech</source><year>1989</year><volume>13</volume><issue>3</issue><fpage>165</fpage><lpage>174</lpage><pub-id pub-id-type="pmid">2685196</pub-id></element-citation></ref><ref id="R12"><label>12</label><element-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Al-Amoudi</surname><given-names>A</given-names></name><etal/></person-group><article-title>Cryo-electron microscopy of vitreous sections of native biological cells and tissues</article-title><source>J Struct Bio</source><year>2004</year><volume>148</volume><issue>1</issue><fpage>131</fpage><lpage>135</lpage><pub-id pub-id-type="pmid">15363793</pub-id></element-citation></ref><ref id="R13"><label>13</label><element-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Krueger</surname><given-names>R</given-names></name></person-group><article-title>Dual-column (FIB-SEM) wafer applications</article-title><source>Micron</source><year>1999</year><volume>30</volume><issue>3</issue><fpage>221</fpage><lpage>226</lpage></element-citation></ref><ref id="R14"><label>14</label><element-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Hayles</surname><given-names>M</given-names></name><etal/></person-group><article-title>The making of frozen-hydrated, vitreous lamellas from cells for cryo-electron microscopy</article-title><source>J Struct Bio</source><year>2010</year><volume>172</volume><issue>2</issue><fpage>180</fpage><lpage>190</lpage><pub-id pub-id-type="pmid">20638479</pub-id></element-citation></ref><ref id="R15"><label>15</label><element-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Wolff</surname><given-names>G</given-names></name><etal/></person-group><article-title>Mind the gap: Micro-expansion joints drastically decrease the bending of FIB-milled cryo-lamellae</article-title><source>J Struct Bio</source><year>2019</year><volume>208</volume><issue>3</issue><elocation-id>107389</elocation-id><pub-id pub-id-type="pmid">31536774</pub-id></element-citation></ref><ref id="R16"><label>16</label><element-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Peddie</surname><given-names>C</given-names></name><name><surname>Collinson</surname><given-names>L</given-names></name></person-group><article-title>Exploring the third dimension: Volume electron microscopy comes of age</article-title><source>Micron</source><year>2014</year><volume>61</volume><fpage>9</fpage><lpage>19</lpage><pub-id pub-id-type="pmid">24792442</pub-id></element-citation></ref><ref id="R17"><label>17</label><element-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Peddie</surname><given-names>C</given-names></name><etal/></person-group><article-title>Volume electron microscopy</article-title><source>Nat Rev Methods Primers</source><year>2022</year><volume>2</volume><fpage>51</fpage></element-citation></ref><ref id="R18"><label>18</label><element-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Hagen</surname><given-names>W</given-names></name><etal/></person-group><article-title>Implementation of a cryo-electron tomography tilt-scheme optimized for high resolution subtomogram averaging</article-title><source>J Struct Bio</source><year>2017</year><volume>197</volume><issue>2</issue><fpage>191</fpage><lpage>198</lpage><pub-id pub-id-type="pmcid">PMC5287356</pub-id><pub-id pub-id-type="pmid">27313000</pub-id><pub-id pub-id-type="doi">10.1016/j.jsb.2016.06.007</pub-id></element-citation></ref><ref id="R19"><label>19</label><element-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Koning</surname><given-names>R</given-names></name><etal/></person-group><article-title>Advances in cryo-electron tomography for biology and medicine</article-title><source>AnnAnat</source><year>2018</year><volume>217</volume><fpage>82</fpage><lpage>96</lpage><pub-id pub-id-type="pmid">29526767</pub-id></element-citation></ref><ref id="R20"><label>20</label><element-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Pyle</surname><given-names>E</given-names></name><name><surname>Zanetti</surname><given-names>G</given-names></name></person-group><article-title>Current data processing strategies for cryo-electron tomography and subtomogram averaging</article-title><source>Biochemical Journal</source><year>2021</year><volume>478</volume><issue>10</issue><fpage>1827</fpage><lpage>1845</lpage><pub-id pub-id-type="pmcid">PMC8133831</pub-id><pub-id pub-id-type="pmid">34003255</pub-id><pub-id pub-id-type="doi">10.1042/BCJ20200715</pub-id></element-citation></ref><ref id="R21"><label>21</label><element-citation publication-type="web"><person-group person-group-type="author"><name><surname>Balyschew</surname><given-names>N</given-names></name><name><surname>Kudryashev</surname><given-names>M</given-names></name><etal/></person-group><source>TomoBEAR</source><year>2022</year><comment><ext-link ext-link-type="uri" xlink:href="https://github.com/KudryashevLab/TomoBEAR">https://github.com/KudryashevLab/TomoBEAR</ext-link></comment></element-citation></ref><ref id="R22"><label>22</label><element-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Pyle</surname><given-names>E</given-names></name><name><surname>Zanetti</surname><given-names>G</given-names></name></person-group><article-title>Automated Workflow to Pre-Process Raw Tomography Data for RELION 4.0</article-title><year>2022</year><comment><ext-link ext-link-type="uri" xlink:href="https://github.com/EuanPyle/relion4_tomo_robot">https://github.com/EuanPyle/relion4_tomo_robot</ext-link></comment></element-citation></ref><ref id="R23"><label>23</label><element-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Tang</surname><given-names>G</given-names></name><name><surname>Peng</surname><given-names>L</given-names></name><etal/></person-group><article-title>EMAN2: an extensible image processing suite for electron microscopy</article-title><source>J Struct Bio</source><year>2007</year><volume>157</volume><fpage>38</fpage><lpage>46</lpage><pub-id pub-id-type="pmid">16859925</pub-id></element-citation></ref><ref id="R24"><label>24</label><element-citation publication-type="journal"><person-group person-group-type="author"><name><surname>de la Rosa-Trevin</surname><given-names>J</given-names></name><name><surname>Quintana</surname><given-names>A</given-names></name><etal/></person-group><article-title>Scipion: A software framework toward integration, reproducibility and validation in 3D electron microscopy</article-title><source>J Struct Bio</source><year>2016</year><volume>195</volume><issue>1</issue><fpage>93</fpage><lpage>99</lpage><pub-id pub-id-type="pmid">27108186</pub-id></element-citation></ref><ref id="R25"><label>25</label><element-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Tegunov</surname><given-names>D</given-names></name><name><surname>Cramer</surname><given-names>P</given-names></name></person-group><article-title>Real-time cryo-electron microscopy data preprocessing with Warp</article-title><source>Nat Methods</source><year>2019</year><volume>16</volume><fpage>1146</fpage><lpage>1152</lpage><pub-id pub-id-type="pmcid">PMC6858868</pub-id><pub-id pub-id-type="pmid">31591575</pub-id><pub-id pub-id-type="doi">10.1038/s41592-019-0580-y</pub-id></element-citation></ref><ref id="R26"><label>26</label><element-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Zheng</surname><given-names>S</given-names></name><etal/></person-group><article-title>MotionCor2: anisotropic correction of beam-induced motion for improved cryo-electron microscopy</article-title><source>Nat Methods</source><year>2017</year><volume>14</volume><fpage>331</fpage><lpage>332</lpage><pub-id pub-id-type="pmcid">PMC5494038</pub-id><pub-id pub-id-type="pmid">28250466</pub-id><pub-id pub-id-type="doi">10.1038/nmeth.4193</pub-id></element-citation></ref><ref id="R27"><label>27</label><element-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Mindell</surname><given-names>J</given-names></name><name><surname>Grigorieff</surname><given-names>N</given-names></name></person-group><article-title>Accurate determination of local defocus and specimen tilt in electron microscopy</article-title><source>J Struct Bio</source><year>2003</year><volume>142</volume><issue>3</issue><fpage>334</fpage><lpage>347</lpage><pub-id pub-id-type="pmid">12781660</pub-id></element-citation></ref><ref id="R28"><label>28</label><element-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Rohou</surname><given-names>A</given-names></name><name><surname>Grigorieff</surname><given-names>N</given-names></name></person-group><article-title>CTFFIND4: Fast and accurate defocus estimation from electron micrographs</article-title><source>J Struct Bio</source><year>2015</year><volume>192</volume><issue>2</issue><fpage>216</fpage><lpage>221</lpage><pub-id pub-id-type="pmcid">PMC6760662</pub-id><pub-id pub-id-type="pmid">26278980</pub-id><pub-id pub-id-type="doi">10.1016/j.jsb.2015.08.008</pub-id></element-citation></ref><ref id="R29"><label>29</label><element-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Kremer</surname><given-names>J</given-names></name><etal/></person-group><article-title>Computer visualization of three-dimensional image data using IMOD</article-title><source>J Struct Bio</source><year>1996</year><volume>116</volume><issue>1</issue><fpage>71</fpage><lpage>76</lpage><pub-id pub-id-type="pmid">8742726</pub-id></element-citation></ref><ref id="R30"><label>30</label><element-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Mastronarde</surname><given-names>D</given-names></name><name><surname>Held</surname><given-names>S</given-names></name></person-group><article-title>Automated tilt series alignment and tomographic reconstruction in IMOD</article-title><source>J Struct Bio</source><year>2017</year><volume>197</volume><issue>2</issue><fpage>102</fpage><lpage>113</lpage><pub-id pub-id-type="pmcid">PMC5247408</pub-id><pub-id pub-id-type="pmid">27444392</pub-id><pub-id pub-id-type="doi">10.1016/j.jsb.2016.07.011</pub-id></element-citation></ref><ref id="R31"><label>31</label><element-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Zheng</surname><given-names>S</given-names></name><etal/></person-group><article-title>AreTomo: An integrated software package for automated marker-free, motion-corrected cryo-electron tomographic alignment and reconstruction</article-title><source>J Struct Bio X</source><year>2022</year><volume>6</volume><elocation-id>100068</elocation-id><pub-id pub-id-type="pmcid">PMC9117686</pub-id><pub-id pub-id-type="pmid">35601683</pub-id><pub-id pub-id-type="doi">10.1016/j.yjsbx.2022.100068</pub-id></element-citation></ref><ref id="R32"><label>32</label><element-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Wadeson</surname><given-names>N</given-names></name><name><surname>Basham</surname><given-names>M</given-names></name></person-group><article-title>Savu: A Python-based, MPI Framework for Simultaneous Processing of Multiple, N-dimensional, Large Tomography Datasets</article-title><year>2016</year><source>ArXiV: 1610.08015v1</source></element-citation></ref><ref id="R33"><label>33</label><element-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Lambert</surname><given-names>T</given-names></name><etal/></person-group><article-title>napari/magicgui</article-title><source>Zenodo</source><year>2022</year><pub-id pub-id-type="doi">10.5281/zenodo.7254817</pub-id></element-citation></ref><ref id="R34"><label>34</label><element-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Kluyver</surname><given-names>T</given-names></name><etal/></person-group><article-title>Jupyter Notebooks - a publishing format for reproducible computational workflows</article-title><source>Positioning and Power in Academic Publishing: Players, Agents and Agendas</source><year>2016</year><fpage>87</fpage><lpage>90</lpage></element-citation></ref><ref id="R35"><label>35</label><element-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Burt</surname><given-names>A</given-names></name><etal/></person-group><article-title>Complete structure of the chemosensory array core signalling unit in an <italic>E. coli</italic> minicell strain</article-title><source>Nat Comms</source><year>2020</year><volume>11</volume><fpage>743</fpage><pub-id pub-id-type="pmcid">PMC7005262</pub-id><pub-id pub-id-type="pmid">32029744</pub-id><pub-id pub-id-type="doi">10.1038/s41467-020-14350-9</pub-id></element-citation></ref><ref id="R36"><label>36</label><element-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Timischi</surname><given-names>F</given-names></name></person-group><article-title>The contrast-to-noise ratio for image quality evaluation in scanning electron microscopy</article-title><source>Scanning</source><year>2015</year><volume>37</volume><issue>1</issue><fpage>54</fpage><lpage>62</lpage><pub-id pub-id-type="pmid">25533747</pub-id></element-citation></ref><ref id="R37"><label>37</label><element-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Otsu</surname><given-names>N</given-names></name></person-group><article-title>A threshold selection method from gray-level histograms</article-title><source>IEEE Trans Sys Man Cyber</source><year>1979</year><volume>9</volume><issue>1</issue><fpage>62</fpage><lpage>66</lpage></element-citation></ref><ref id="R38"><label>38</label><element-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Cardone</surname><given-names>G</given-names></name><name><surname>Grunewald</surname><given-names>K</given-names></name><etal/></person-group><article-title>A resolution criterion for electron tomography based on cross-validation</article-title><source>J Struct Bio</source><year>2005</year><volume>151</volume><issue>2</issue><fpage>117</fpage><lpage>129</lpage><pub-id pub-id-type="pmid">15964766</pub-id></element-citation></ref><ref id="R39"><label>39</label><element-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Turonova</surname><given-names>B</given-names></name><etal/></person-group><article-title>Efficient 3D-CTF correction for cryo-electron tomography using NovaCTF improves subtomogram averaging resolution to 3.4 A</article-title><source>J Struct Bio</source><year>2017</year><volume>199</volume><issue>3</issue><fpage>187</fpage><lpage>195</lpage><pub-id pub-id-type="pmcid">PMC5614107</pub-id><pub-id pub-id-type="pmid">28743638</pub-id><pub-id pub-id-type="doi">10.1016/j.jsb.2017.07.007</pub-id></element-citation></ref><ref id="R40"><label>40</label><element-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Obr</surname><given-names>M</given-names></name><etal/></person-group><article-title>Exploring high-resolution cryo-ET and subtomogram averaging capabilities of contemporary DEDs</article-title><source>J Struct Bio</source><year>2022</year><volume>214</volume><issue>2</issue><elocation-id>107852</elocation-id><pub-id pub-id-type="pmid">35351542</pub-id></element-citation></ref><ref id="R41"><label>41</label><element-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Gursoy</surname><given-names>D</given-names></name><etal/></person-group><article-title>Rapid alignment of nanotomography data using joint iterative reconstruction and reprojection</article-title><source>Sci Rep</source><year>2017</year><volume>7</volume><elocation-id>11818</elocation-id><pub-id pub-id-type="pmcid">PMC5603591</pub-id><pub-id pub-id-type="pmid">28924196</pub-id><pub-id pub-id-type="doi">10.1038/s41598-017-12141-9</pub-id></element-citation></ref><ref id="R42"><label>42</label><element-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Guo</surname><given-names>H</given-names></name><etal/></person-group><article-title>Electron-event representation data enable efficient cryoEM file storage with full preservation of spatial and temporal resolution</article-title><source>IUCrJ</source><year>2020</year><volume>7</volume><issue>5</issue><fpage>860</fpage><lpage>869</lpage><pub-id pub-id-type="pmcid">PMC7467176</pub-id><pub-id pub-id-type="pmid">32939278</pub-id><pub-id pub-id-type="doi">10.1107/S205225252000929X</pub-id></element-citation></ref><ref id="R43"><label>43</label><element-citation publication-type="journal"><person-group person-group-type="author"><name><surname>van Aarle</surname><given-names>W</given-names></name><etal/></person-group><article-title>Fast and flexible X-ray tomography using the ASTRA toolbox</article-title><source>Optics express</source><year>2016</year><volume>24</volume><issue>22</issue><fpage>25129</fpage><lpage>25147</lpage><pub-id pub-id-type="pmid">27828452</pub-id></element-citation></ref><ref id="R44"><label>44</label><element-citation publication-type="journal"><person-group person-group-type="author"><name><surname>van Aarle</surname><given-names>W</given-names></name><etal/></person-group><article-title>The ASTRA Toolbox: A platform for advanced algorithm development in electron tomography</article-title><source>Ultramicroscopy</source><year>2015</year><volume>157</volume><fpage>35</fpage><lpage>47</lpage><pub-id pub-id-type="pmid">26057688</pub-id></element-citation></ref><ref id="R45"><label>45</label><element-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Palenstijn</surname><given-names>W</given-names></name><etal/></person-group><article-title>Performance improvements for iterative electron tomography reconstruction using graphics processing units (GPUs)</article-title><source>J Struct Bio</source><year>2011</year><volume>176</volume><issue>2</issue><fpage>250</fpage><lpage>253</lpage><pub-id pub-id-type="pmid">21840398</pub-id></element-citation></ref><ref id="R46"><label>46</label><element-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Fernando</surname><given-names>K</given-names></name><name><surname>Fuller</surname><given-names>S</given-names></name></person-group><article-title>Determination of astigmatism in TEM images</article-title><source>J Struct Bio</source><year>2007</year><volume>157</volume><fpage>189</fpage><lpage>200</lpage><pub-id pub-id-type="pmid">17067820</pub-id></element-citation></ref><ref id="R47"><label>47</label><element-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Croxford</surname><given-names>M</given-names></name><etal/></person-group><article-title>Entropy-regularized deconvolution of cellular cryotransmission electron tomograms</article-title><source>PNAS</source><year>2021</year><volume>118</volume><issue>50</issue><elocation-id>e2108738118</elocation-id><pub-id pub-id-type="pmcid">PMC8685678</pub-id><pub-id pub-id-type="pmid">34876518</pub-id><pub-id pub-id-type="doi">10.1073/pnas.2108738118</pub-id></element-citation></ref><ref id="R48"><label>48</label><element-citation publication-type="book"><person-group person-group-type="author"><name><surname>Reimer</surname><given-names>L</given-names></name><name><surname>Kohl</surname><given-names>H</given-names></name></person-group><source>Transmission Electron Microscopy: Physics of Image Formation</source><publisher-name>Springer</publisher-name><year>2007</year><volume>5e</volume></element-citation></ref><ref id="R49"><label>49</label><element-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Richarson</surname><given-names>W</given-names></name></person-group><article-title>Bayesian-Based Iterative Method of Image Restoration</article-title><source>JOSA</source><year>1972</year><volume>62</volume><issue>1</issue><fpage>55</fpage><lpage>59</lpage></element-citation></ref><ref id="R50"><label>50</label><element-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Lucy</surname><given-names>L</given-names></name></person-group><article-title>An iterative technique for the rectification of observed distributions</article-title><source>Astronomical Journal</source><year>1974</year><volume>79</volume><issue>6</issue><fpage>745</fpage><lpage>754</lpage></element-citation></ref><ref id="R51"><label>51</label><element-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Perdigao</surname><given-names>LM</given-names></name><etal/></person-group><article-title>rosalindfranklininstitute/RedLionfish</article-title><source>Github</source><year>2022</year><comment><ext-link ext-link-type="uri" xlink:href="https://github.com/rosalindfranklininstitute/RedLionfish">https://github.com/rosalindfranklininstitute/RedLionfish</ext-link></comment></element-citation></ref><ref id="R52"><label>52</label><element-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Lee</surname><given-names>N</given-names></name></person-group><article-title>Block-iterative Richardson-Lucy methods for image deblurring</article-title><source>EURASIP Journal on Image and Video Processing 2015</source><year>2015</year><volume>14</volume><comment>Neville B.-y. Yee et al</comment></element-citation></ref></ref-list></back><floats-group><boxed-text id="BX1" position="float" orientation="portrait"><caption><title>Impact Statement</title></caption><p>The field of cryo electron tomography has grown substantially in recent years, bringing about new advances in hardware and software which enable visualisation of cell and tissue architecture and proteins found in their native context. These same advances have, in some ways, stratified the field into those with access and those without. On the software side, this has emphasised the need for open-source options that do not require high levels of computational literacy to access. Additionally, it has highlighted the need for ways to both mix-and-match software for easy prototyping and comparisons between parameters and methods. Ot2Rec addresses these needs through a simple, unified plugin structure allowing the addition of existing software or the development of new and does so in a way which democratises access.</p></boxed-text><fig id="F1" position="float"><label>Figure 1</label><caption><p>Typical image processing tasks for reconstructing tomograms from raw micrograph movies. Key: boxes - datasets, solid arrows - processes necessary for tomogram reconstruction, dotted arrows - optional processes.</p></caption><graphic xlink:href="EMS158950-f001"/></fig><fig id="F2" position="float"><label>Figure 2</label><caption><p>Standard workflows implemented in Ot2Rec. Red arrows denote possible branches of the workflow, which currently covers all permutations of existing implemented plugins (though not necessarily all available options within a software e.g., IMOD).</p></caption><graphic xlink:href="EMS158950-f002"/></fig><fig id="F3" position="float"><label>Figure 3</label><caption><title>All tilt series in EMPIAR-10364 could be reconstructed at once in Ot2Rec and evaluated at a glance with the automatically generated report, some sections of which are highlighted below.</title><p>(a) Workflow diagram for processes performed in Case Study 1. (b) Means and standard deviations of motion correction shifts between movie frames for all tilt series. (c) Means and standard deviations of alignment shifts between patches (L<sub>2</sub>-norm) for all tilt series. (d) Central x-y slice of tomogram from tilt series 18 in EMPIAR-10364, with a Gaussian blur filter applied (σ = 2.0 px ~ 8.972A). The full report is included in the <xref ref-type="supplementary-material" rid="SD1">Supplementary Information</xref>.</p></caption><graphic xlink:href="EMS158950-f003"/></fig><fig id="F4" position="float"><label>Figure 4</label><caption><title>PSF simulation and deconvolution implemented as custom plugins in Ot2Rec can be easily integrated into existing image processing workflows.</title><p>Deconvolution improved image quality of all tomograms in this case study of human choriocarcinoma cells. (a) Workflow diagram for processes performed in Case Study 2. (b) Thumbnails showing an example original and deconvolved tomogram (tilt series 9), unmasked (top row) and masked (bottom row). The masked regions were used to calculate the CNR. (c) Violin plot showing a general boost (&gt; 1) in contrast-to-noise ratios after deconvolution‥</p></caption><graphic xlink:href="EMS158950-f004"/></fig><fig id="F5" position="float"><label>Figure 5</label><caption><title>Different combinations of IMOD, AreTomo, and Savu for alignment and reconstruction yielded varying results.</title><p>Five combinations (1 - 5) were tested, as shown in the workflow diagram a. NB. Iterative reconstruction with CGLS in Savu (Route 5) failed due to poor alignment results from IMOD alignment. However, the same reconstruction method produced a good quality reconstruction when the AreTomo alignment method was used instead (Route 1) (a) Workflow diagram used in Case Study 3, (b) Central x-y slice of the tomogram reconstructed with IMOD, AreTomo, and Savu on IMOD and AreTomo aligned data. Note that IMOD reconstruction with AreTomo aligned data is not available on the current version of Ot2Rec, but will be supported in later versions. A movie showing this figure in 3D is available in the <xref ref-type="supplementary-material" rid="SD1">Supplementary Information (Movie S1)</xref>.</p></caption><graphic xlink:href="EMS158950-f005"/></fig><fig id="F6" position="float"><label>Figure 6</label><caption><title>Evaluation of all tilt series shifts from motion correction and alignment at once show substantially larger shifts from tilt series 13 onwards.</title><p>(a) Euclidean shifts reported by motioncor2 for all tilt series in Case Study 3 (<xref ref-type="sec" rid="S15">Sect. 3.3</xref>) show a large increase from tilt series 13 onwards. (b) Alignment shifts reported by IMOD and AreTomo alignment processes. The alignment shift here is the Euclidean distance between patches which are recorded as metadata from IMOD and AreTomo directly. In both (a) and (b), The bar plots represent the mean and the error bars are the standard deviations in shifts‥</p></caption><graphic xlink:href="EMS158950-f006"/></fig><table-wrap id="T1" position="float" orientation="portrait"><label>Table 1</label><caption><title>Comparison ofcryo-ET reconstruction pipelines.</title></caption><table frame="box" rules="all"><thead><tr><th align="left" valign="top">Software/Feature</th><th align="left" valign="top">TomoBear</th><th align="left" valign="top">TomoRobot</th><th align="left" valign="top">EMAN2</th><th align="left" valign="top">Scipion3</th><th align="left" valign="top">Warp</th><th align="left" valign="top">Ot2Rec</th></tr></thead><tbody><tr><td align="left" valign="middle">Open-source?</td><td align="left" valign="middle">Yes</td><td align="left" valign="middle">Yes</td><td align="left" valign="middle">Yes</td><td align="left" valign="middle">Yes</td><td align="left" valign="middle">Yes</td><td align="left" valign="middle">Yes</td></tr><tr><td align="left" valign="middle">Programming language</td><td align="left" valign="middle">Matlab</td><td align="left" valign="middle">Python, Matlab</td><td align="left" valign="middle">Python</td><td align="left" valign="middle">Python</td><td align="left" valign="middle">C#, C++, CUDA C</td><td align="left" valign="middle">Python</td></tr><tr><td align="left" valign="middle">File formats</td><td align="left" valign="middle">EER, MRC, Tiff</td><td align="left" valign="middle">MRC, Tiff</td><td align="left" valign="middle">EER, MRC, Tiff, proprietary file formats</td><td align="left" valign="middle">raw, MRC,Tiff, jpeg, proprietary formats</td><td align="left" valign="middle">MRC, Tiff, EM</td><td align="left" valign="middle">EER, MRC, Tiff</td></tr><tr><td align="left" valign="middle">GUI</td><td align="left" valign="middle">No</td><td align="left" valign="middle">No</td><td align="left" valign="middle">Yes</td><td align="left" valign="middle">Yes</td><td align="left" valign="middle">Yes</td><td align="left" valign="middle">Yes</td></tr><tr><td align="left" valign="middle">Motion Correction</td><td align="left" valign="middle">MotionCor2</td><td align="left" valign="middle">MotionCor2</td><td align="left" valign="middle">EMAN2</td><td align="left" valign="middle">MotionCor2, Xmipptomo, FlexAlign.</td><td align="left" valign="middle">Warp</td><td align="left" valign="middle">MotionCor2</td></tr><tr><td align="left" valign="middle">Alignment</td><td align="left" valign="middle">Dynamo, IMOD</td><td align="left" valign="middle">modified Dynamo</td><td align="left" valign="middle">EMAN2</td><td align="left" valign="middle">IMOD</td><td align="left" valign="middle">Warp</td><td align="left" valign="middle">AreTomo, IMOD</td></tr><tr><td align="left" valign="middle">Reconstruction</td><td align="left" valign="middle">IMOD</td><td align="left" valign="middle">Relion</td><td align="left" valign="middle">EMAN2</td><td align="left" valign="middle">IMOD, Tomo3D, AreTomo, Nova-CTF</td><td align="left" valign="middle">Warp</td><td align="left" valign="middle">AreTomo, IMOD, Savu</td></tr><tr><td align="left" valign="middle">CTF estimation</td><td align="left" valign="middle">Gctf</td><td align="left" valign="middle">CTFFind4</td><td align="left" valign="middle">EMAN2</td><td align="left" valign="middle">Cistem, CTFFIND4, Gctf, IMOD, Emantomo</td><td align="left" valign="middle">Warp</td><td align="left" valign="middle">CTFFind4, CTFSim</td></tr><tr><td align="left" valign="middle">Dataset requirements</td><td align="left" valign="middle">Unspecified</td><td align="left" valign="middle">Fiducials required Dose-symmetric tilt-scheme starting at 0</td><td align="left" valign="middle">Unspecified</td><td align="left" valign="middle">Unspecified</td><td align="left" valign="middle">Unspecified</td><td align="left" valign="middle">Unspecified</td></tr><tr><td align="left" valign="middle">References</td><td align="left" valign="middle">(<xref ref-type="bibr" rid="R21">21</xref>)</td><td align="left" valign="middle">(<xref ref-type="bibr" rid="R22">22</xref>)</td><td align="left" valign="middle">(<xref ref-type="bibr" rid="R23">23</xref>)</td><td align="left" valign="middle">(<xref ref-type="bibr" rid="R24">24</xref>)</td><td align="left" valign="middle">(<xref ref-type="bibr" rid="R25">25</xref>)</td><td align="left" valign="middle">this work</td></tr></tbody></table></table-wrap><table-wrap id="T2" position="float" orientation="portrait"><label>Table 2</label><caption><title>Ot2Rec commands and their descriptions.</title></caption><table frame="box" rules="all"><thead><tr><th align="left" valign="top">Ot2Rec Command</th><th align="left" valign="top">Description</th></tr></thead><tbody><tr><td align="left" valign="middle">o2r.new</td><td align="left" valign="middle">Creates a new Ot2Rec project.</td></tr><tr><td align="left" valign="middle">o2r.&lt;plugin&gt;.&lt;function&gt;.new</td><td align="left" valign="middle">Creates a new instance of each plugin. For example, o2r.imod.align.new starts a new alignment in IMOD and captures user inputs in the GUI for this plugin. The user parameters are stored in a yaml file.</td></tr><tr><td align="left" valign="middle">o2r.&lt;plugin&gt;.&lt;function&gt;.run &lt;proj_name&gt;</td><td align="left" valign="middle">Runs the commands that perform the plugin’s functions on the project where &lt;proj_name&gt;is the project name. For example, o2r.imod.align.run TS runs IMOD alignment on all tilt series in project TS, which has user parameters stored in TS_align.yaml created from o2r.imod.align.new.</td></tr><tr><td align="left" valign="middle">o2r.report.run &lt;proj_name&gt; --to_html --to_slides</td><td align="left" valign="middle">Generate the report for the project &lt;proj_name&gt;as a html document and as slides. Note that this requires the o2r_report environment to be activated (detailed instructions available on Github).</td></tr></tbody></table></table-wrap></floats-group></article>